<style>
.content-container {
  width: 50%;
}

table, td, th {
  border: 1px solid black;
  border-collapse: collapse;
}

form input {
  margin: 4px 0px;
}
</style>

<%
  @teams = Team.all
  preferences = TeamPreference.all
  @team_submitted_preferences = Hash.new

  for t in @teams
    @team_submitted_preferences[t.id] = false
  end

  for pref in preferences
    @team_submitted_preferences[pref.team_id] = true
  end
%>

<div class="content-container">
  <table>
    <tr>
      <td>
        Team
      </td>
      <td>
        Preferences Submitted
      </td>
    </tr>
    <% for team in @teams %>
    <tr>
      <td>
        <%= team.name %>
      </td>
      <td>
        <%= @team_submitted_preferences[team.id] %>
      </td>
    </tr>
    <% end %>
  </table>

  <%= form_tag "/createteams", method: :post do %>
    <p>Max Team Size<p>
    <%= number_field_tag "team_size", nil, min: 1, step: 1 %>
    <%= submit_tag 'Create Teams' %>
  <% end %>

  <%= params[:errors] %>

  <% if params[:teams] %>
    <%
      result_teams = params[:teams]
      lengths = []
      puts result_teams
      for value in result_teams.values
        lengths.push(value.length())
      end
      maxLength = lengths.max()
    %>
    <table>
      <tr>
        <% for key in result_teams.keys %>
          <td>
            <%= Team.find(key).name %>
          </td>
        <% end %>
      </tr>
      <% for index in 0..maxLength-1 %>
        <tr>
        <% for val in result_teams.values %>
          <% if index < val.length() %>
            <td>
              <%= val[index] %>
            </td>
          <% else %>
            <td>
            </td>
          <% end %>
        <% end %>
        </tr>
      <% end %>
    </table>
  <% end %>
</div>
